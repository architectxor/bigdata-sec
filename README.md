# Отчет по практической работе №5 "Развертывание Falco-контейнера на узле"
Запуск Falco Security в контейнере
Для начала, как показано на рисунке 1, необходимо загрузить образ Falco с сервиса DockerHub.

![image](https://user-images.githubusercontent.com/49113443/139586947-811586f6-d9fe-4887-975d-f52ff65b427a.png)

Рисунок 1 – Загрузка образа контейнера Falco c сервиса DockerHub.

После того, как образ контейнера загружен нам потребуется установить драйвер Falco на хостовую машину, сделать это можно в составе пакета Falco. Для этого я использовал небольшой скрипт, текст которого показан на рисунке 2.
![image](https://user-images.githubusercontent.com/49113443/139586956-bbe558c5-3c99-43a3-9cba-f26abe8326a5.png)


Рисунок 2 – Установочный скрипт Falco.

Убедиться в том, что драйвер Falco работает можно вызвав загрузчик драйвера, как показано на рисунке 3. Если всё работает, то он выведет версию Falco-клиента, Falco-драйвера и сообщение об успешном запуске.
![image](https://user-images.githubusercontent.com/49113443/139586962-c107066b-aa06-4581-aa6c-e67474a85488.png)


Рисунок 3 – Проверка работы драйвера Falco на узле.

Теперь из официального репозитория Falco необходимо загрузить список правил, как показано на рисунке 4.
![image](https://user-images.githubusercontent.com/49113443/139586975-ac71a720-8798-478d-97a4-74c185576170.png)


Рисунок 4 – Загрузка правил для Falco.

Несмотря на то, что установленный пакет Falco уже имел загруженный список правил, я заменил его загруженным ранее с предварительным резервным копированием, как показано на рисунке 5. Отличие между двумя списками правил было всего в одном булевом операторе.
![image](https://user-images.githubusercontent.com/49113443/139586989-bbb198b9-a08f-4075-86c8-c90a8792f557.png)


Рисунок 5 – Загрузка новых правил с предварительным бэкапом действующих.
Текст скрипта для выполнения резевного копирования показан на рисунке 6.
![image](https://user-images.githubusercontent.com/49113443/139587009-80b3eeed-9c88-4464-8b4b-0bc3d535f56d.png)


Рисунок 6 – Скрипт для резервного копирования действующих правил Falco.

Теперь можно перейти к запуску контейнера Falco, для этого я использовал скрипт, исходный текст которого представлен на рисунке 7.
![image](https://user-images.githubusercontent.com/49113443/139587028-27c6fb6f-447c-4685-8ac5-f451629e278a.png)


Рисунок 7 – Скрипт для запуска Falco.
Так как при запуске контейнера я запустил его в detattached-режиме, то для просмотра того, что выводит запущенный контейнер в Docker используется команда `docker logs CONTAINER`, где CONTAINER – конкретное название запущенного контейнера.

![image](https://user-images.githubusercontent.com/49113443/139587063-db59f8b1-50d3-4033-9e24-b6c553625d2d.png)

Рисунок 8 – Просмотр логов об успешном запуске Falco-контейнера.

Чтобы проверить работу правил Falco я создал файл в одной из директорий, прикрепленных через docker-volume к контейнеру, вывод сообщений Falco можно увидеть на рисунке 9.

![image](https://user-images.githubusercontent.com/49113443/139587078-68bb8ed2-ff2a-46ca-90ea-3269db0cad3d.png)

Рисунок 9 – Проверка срабатывания правил Falco.

**Вывод**: В данной работе я произвел установку и конфигурацию Docker-контейнера Falco. Falco позволяет отслеживать возникающие системные вызовы ядру ОС узла, на котором он установлен.
